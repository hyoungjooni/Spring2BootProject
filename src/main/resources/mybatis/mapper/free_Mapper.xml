<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.ddit.controller.chapt08.free.mapper.IFreeMapper">


<!-- 1. 등록하기 -->

<insert id="register" parameterType="fVO" useGeneratedKeys="true">
	<selectKey keyProperty="freeNo" resultType="int" order="BEFORE">
		select seq_free.nextval from dual
	</selectKey>
	
	insert into free (
		free_no, title, content, writer, reg_date
	) values (
		#{freeNo}, #{title}, #{content}, #{writer}, sysdate
	
	)

</insert>



<!-- 상세 정보 가져오기 -->
<select id="detail" parameterType="int" resultType="fVO">
	select
	 free_no, title, content, writer, reg_date
	from free
	where free_no = #{freeNo}
</select>


<!-- 목록출력하기  -->
<select id="list" resultType="fVO" >
	select
		free_no, title, content, writer, reg_date
	from free
	order by free_no desc
</select>


<!-- 수정 -->
<update id="modify" parameterType="fVO">
	update free
	set
		title = #{title}, 
		writer = #{writer},
		content = #{content}
	where free_No = #{freeNo}
</update>



<!-- 삭제 -->
<delete id="delete" parameterType="int" >
	delete from free
	where free_No = ${freeNo}
</delete>



<!-- 검색 -->
<select id="search" parameterType="fVO" resultType="fVO">
select 
	free_no, title, content, writer, reg_date
from free
where 1=1
<if test="title != null and title != ''">
and title like '%'||#{title}||'%'
</if>
order by free_no desc

</select>
</mapper>